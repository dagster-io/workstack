name: erk
version: 0.3.1
description: Erk implementation workflow commands for creating worktrees from plans (.PLAN.md) and executing implementation. Includes commands for plan creation, execution, and quick access.
license: See LICENSE.md
artifacts:
  command:
    - commands/erk/plan-save.md
    - commands/erk/plan-enrich.md
    - commands/erk/plan-save-enriched.md
    - commands/erk/plan-implement.md
    - commands/erk/merge-conflicts-fix.md
    - commands/erk/plan-submit.md
  agent:
    - agents/erk/issue-wt-creator.md
    - agents/erk/plan-extractor.md
  doc:
    - docs/erk/EXAMPLES.md
    - docs/erk/includes/create-github-issue.md
    - docs/erk/includes/enrichment-process.md
    - docs/erk/includes/session-file-location.md
    - docs/erk/includes/success-output-format.md
    - docs/erk/includes/validate-git-repository.md
    - docs/erk/includes/validate-github-cli.md
    - docs/erk/includes/validate-plan-structure.md
kit_cli_commands:
  - name: plan-save-to-issue
    path: kit_cli_commands/erk/plan_save_to_issue.py
    description: Extract plan from ~/.claude/plans/ and create GitHub issue in one operation
  - name: find-project-dir
    path: kit_cli_commands/erk/find_project_dir.py
    description: Find Claude Code project directory for a given filesystem path
  - name: session-id-injector-hook
    path: kit_cli_commands/erk/session_id_injector_hook.py
    description: Inject session ID into conversation context for plan creation
  - name: preprocess-session
    path: kit_cli_commands/erk/preprocess_session.py
    description: Compress JSONL session logs to XML format, auto-discovering agent logs for comprehensive preprocessing
  - name: comment-worktree-creation
    path: kit_cli_commands/erk/comment_worktree_creation.py
    description: Post GitHub comment documenting worktree creation
  - name: parse-issue-reference
    path: kit_cli_commands/erk/parse_issue_reference.py
    description: Parse GitHub issue number from URL or plain number
  - name: issue-title-to-filename
    path: kit_cli_commands/erk/issue_title_to_filename.py
    description: Convert GitHub issue title to plan filename
  - name: post-start-comment
    path: kit_cli_commands/erk/post_start_comment.py
    description: Post implementation start comment to GitHub issue with worktree, branch, and steps list
  - name: post-plan-comment
    path: kit_cli_commands/erk/post_plan_comment.py
    description: Post plan issue comment with workflow instructions
  - name: get-closing-text
    path: kit_cli_commands/erk/get_closing_text.py
    description: Get GitHub issue closing text for PR body
  - name: create-issue
    path: kit_cli_commands/erk/create_issue.py
    description: Create GitHub issue with body from stdin (no permission prompts)
  - name: wrap-plan-in-metadata-block
    path: kit_cli_commands/erk/wrap_plan_in_metadata_block.py
    description: Wrap plan content in collapsible GitHub metadata block
  - name: create-wt-from-issue
    path: kit_cli_commands/erk/create_wt_from_issue.py
    description: Create worktree from GitHub issue with erk-plan label
  - name: create-plan-from-context
    path: kit_cli_commands/erk/create_plan_from_context.py
    description: Create GitHub issue from plan content (stdin) with erk-plan label
  - name: check-impl
    path: kit_cli_commands/erk/check_impl.py
    description: Check .impl/ folder structure and validate prerequisites
  - name: agent-debug
    path: kit_cli_commands/erk/agent_debug.py
    description: Inspect failed agent runs from the current session
  - name: validate-plan-content
    path: kit_cli_commands/erk/validate_plan_content.py
    description: Validate plan content structure and quality from stdin
  - name: format-success-output
    path: kit_cli_commands/erk/format_success_output.py
    description: Format success output for GitHub issue creation with next steps and metadata
  - name: format-error
    path: kit_cli_commands/erk/format_error.py
    description: Format error messages with consistent structure and suggested actions
  - name: create-erp-from-issue
    path: kit_cli_commands/erk/create_erp_from_issue.py
    description: Create .erp/ folder from GitHub issue with plan content
  - name: update-dispatch-info
    path: kit_cli_commands/erk/update_dispatch_info.py
    description: Update dispatch info in GitHub issue plan-header metadata
  - name: post-pr-comment
    path: kit_cli_commands/erk/post_pr_comment.py
    description: Post PR link comment to GitHub issue after PR publication
hooks:
  - id: session-id-injector-hook
    lifecycle: UserPromptSubmit
    matcher: "*"
    invocation: dot-agent kit-command erk session-id-injector-hook
    description: Injects session ID into context when /erk:plan-save is invoked
    timeout: 30
